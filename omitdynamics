#!/usr/bin/env raku

my regex dynamic {
   | (\\p+)
   | (\\mp)
   | (\\mf)
   | (\\f+)
   | (\\sfz)
}

for lines() -> $_ is copy {
    dd $/ if /<dynamic>/;
    dd $0;
    s:g{<dynamic>} = '\omit' ~ $/;
    s:g/\\omit\\omit/\\omit/; # in case we run this multiple times over the same code
    .say;
}
